# 显式Mapping设置与常见参数介绍

## 如何显示定义一个Mapping

![image-20220510153314007](/Users/litian/Documents/lian2077/documents/documents/Elastic-Search/Elastic核心技术与实战/images/image-20220510153314007.png)

## 自定义Mapping的一些建议

+ 可以参考API手册，纯手写
+ 为了减少输入的工作量，减少出错概率，可以依照以下步骤
  + 创建一个临时的index，写入一些样本数据
  + 通过访问Mapping API获得该临时文件的动态Mapping定义
  + 修改后用，使用该配置创建你的索引
  + 删除临时索引

## 控制当前字段是否被索引

+ Index - 控制当前字段是否被索引。默认为true。如果设置成false，该字段不可被搜索

  ![image-20220510153419716](/Users/litian/Documents/lian2077/documents/documents/Elastic-Search/Elastic核心技术与实战/images/image-20220510153419716.png)

## Index Options

倒排索引的配置，ES根据需要提供了四种倒排索引的配置

+ 四种不同级别的Index Option配置，可以控制倒排索引记录的内容
  + docs- 记录doc id
  + freqs - 记录doc id 和 term frequencies
  + positions - 记录doc id / term frequencies / term position
  + offsets - doc id / term frequencies / term position / character offects
+ Text类型默认记录postions，其他默认为docs
+ 记录内容越多，占用存储空间越大

![image-20220510153552454](/Users/litian/Documents/lian2077/documents/documents/Elastic-Search/Elastic核心技术与实战/images/image-20220510153552454.png)

## null_value

![image-20220510153710505](/Users/litian/Documents/lian2077/documents/documents/Elastic-Search/Elastic核心技术与实战/images/image-20220510153710505.png)

## copy_to 设置

+ _all在7中被copy_to所替代
+ 满足一些特定的搜索需求
+ copy_to将字段的数值拷贝到目标字段，实现类似_all的作用
+ copy_to的目标字段不出现在搜索结果的 _source中

![image-20220510153739222](/Users/litian/Documents/lian2077/documents/documents/Elastic-Search/Elastic核心技术与实战/images/image-20220510153739222.png)

## 数组类型

+ Elasticsearch中不提供专门的数组类型。但是任何字段，都可以包含多个相同类型的数值

  数据是数组，但是字段类型还是**Text**

  ![image-20220510153844817](/Users/litian/Documents/lian2077/documents/documents/Elastic-Search/Elastic核心技术与实战/images/image-20220510153844817.png)


# URI Search详解

## URI Search - 通过URI query实现搜索

![image-20220510113524145](/Users/litian/Documents/lian2077/documents/documents/Elastic-Search/Elastic核心技术与实战/images/image-20220510113524145.png)

+ q指定查询语句， 使用`Query String Syntax`
+ df 默认字段，不指定时，会对所有字段进行查询
+ Sort排序 / from和size用于分页
+ Profile 可以查看查询是如何被执行

## Query String Syntax

### 指定字段 vs 泛查询

>  q=title:2012 / q=2012

#### 泛查询

> DisjunctionMaxQuery

````shell
# 泛查询 正对_all, 所有字段
GET /movies/_search?q=2012
{
  "profile": "true"
}
````

````json
{
  "took" : 29,
  "timed_out" : false,
  "_shards" : {
    "total" : 1,
    "successful" : 1,
    "skipped" : 0,
    "failed" : 0
  },
  "hits" : {
    "total" : {
      "value" : 219,
      "relation" : "eq"
    },
    "max_score" : 11.303033,
    "hits" : [
      {
        "_index" : "movies",
        "_type" : "_doc",
        "_id" : "72378",
        "_score" : 11.303033,
        "_source" : {
          "@version" : "1",
          "genre" : [
            "Action",
            "Drama",
            "Sci-Fi",
            "Thriller"
          ],
          "id" : "72378",
          "title" : "2012",
          "year" : 2009
        }
      },
      {
        "_index" : "movies",
        "_type" : "_doc",
        "_id" : "2012",
        "_score" : 8.778942,
        "_source" : {
          "@version" : "1",
          "genre" : [
            "Adventure",
            "Comedy",
            "Sci-Fi",
            "Western"
          ],
          "id" : "2012",
          "title" : "Back to the Future Part III",
          "year" : 1990
        }
      },
      {
        "_index" : "movies",
        "_type" : "_doc",
        "_id" : "105254",
        "_score" : 5.2497,
        "_source" : {
          "@version" : "1",
          "genre" : [
            "Adventure",
            "Comedy"
          ],
          "id" : "105254",
          "title" : "Crystal Fairy & the Magical Cactus and 2012",
          "year" : 2013
        }
      },
      {
        "_index" : "movies",
        "_type" : "_doc",
        "_id" : "101415",
        "_score" : 1.0,
        "_source" : {
          "@version" : "1",
          "genre" : [
            "Comedy",
            "Drama",
            "Romance"
          ],
          "id" : "101415",
          "title" : "First Time, The",
          "year" : 2012
        }
      },
      {
        "_index" : "movies",
        "_type" : "_doc",
        "_id" : "101525",
        "_score" : 1.0,
        "_source" : {
          "@version" : "1",
          "genre" : [
            "Crime",
            "Drama"
          ],
          "id" : "101525",
          "title" : "Place Beyond the Pines, The",
          "year" : 2012
        }
      },
      {
        "_index" : "movies",
        "_type" : "_doc",
        "_id" : "101529",
        "_score" : 1.0,
        "_source" : {
          "@version" : "1",
          "genre" : [
            "Comedy",
            "Fantasy",
            "Thriller"
          ],
          "id" : "101529",
          "title" : "Brass Teapot, The",
          "year" : 2012
        }
      },
      {
        "_index" : "movies",
        "_type" : "_doc",
        "_id" : "101884",
        "_score" : 1.0,
        "_source" : {
          "@version" : "1",
          "genre" : [
            "Adventure",
            "Drama",
            "Thriller"
          ],
          "id" : "101884",
          "title" : "Dark Tide",
          "year" : 2012
        }
      },
      {
        "_index" : "movies",
        "_type" : "_doc",
        "_id" : "101973",
        "_score" : 1.0,
        "_source" : {
          "@version" : "1",
          "genre" : [
            "Drama",
            "Thriller"
          ],
          "id" : "101973",
          "title" : "Disconnect",
          "year" : 2012
        }
      },
      {
        "_index" : "movies",
        "_type" : "_doc",
        "_id" : "102070",
        "_score" : 1.0,
        "_source" : {
          "@version" : "1",
          "genre" : [
            "Comedy",
            "Horror",
            "Sci-Fi"
          ],
          "id" : "102070",
          "title" : "Grabbers",
          "year" : 2012
        }
      },
      {
        "_index" : "movies",
        "_type" : "_doc",
        "_id" : "102084",
        "_score" : 1.0,
        "_source" : {
          "@version" : "1",
          "genre" : [
            "Action",
            "Animation",
            "Fantasy"
          ],
          "id" : "102084",
          "title" : "Justice League: Doom",
          "year" : 2012
        }
      }
    ]
  },
  "profile" : {
    "shards" : [
      {
        "id" : "[EUr4MAHQRUCzzBdyE2zqBw][movies][0]",
        "searches" : [
          {
            "query" : [
              {
                "type" : "DisjunctionMaxQuery",
                "description" : "(title.keyword:2012 | id.keyword:2012 | year:[2012 TO 2012] | genre:2012 | @version:2012 | @version.keyword:2012 | id:2012 | genre.keyword:2012 | title:2012)",
                "time_in_nanos" : 18175635,
                "breakdown" : {
                  "set_min_competitive_score_count" : 0,
                  "match_count" : 0,
                  "shallow_advance_count" : 0,
                  "set_min_competitive_score" : 0,
                  "next_doc" : 1188078,
                  "match" : 0,
                  "next_doc_count" : 227,
                  "score_count" : 219,
                  "compute_max_score_count" : 0,
                  "compute_max_score" : 0,
                  "advance" : 0,
                  "advance_count" : 0,
                  "score" : 566424,
                  "build_scorer_count" : 16,
                  "create_weight" : 7752283,
                  "shallow_advance" : 0,
                  "create_weight_count" : 1,
                  "build_scorer" : 8668387
                },
                "children" : [
                  {
                    "type" : "TermQuery",
                    "description" : "title.keyword:2012",
                    "time_in_nanos" : 705488,
                    "breakdown" : {
                      "set_min_competitive_score_count" : 0,
                      "match_count" : 0,
                      "shallow_advance_count" : 2,
                      "set_min_competitive_score" : 0,
                      "next_doc" : 0,
                      "match" : 0,
                      "next_doc_count" : 0,
                      "score_count" : 1,
                      "compute_max_score_count" : 1,
                      "compute_max_score" : 8508,
                      "advance" : 2636,
                      "advance_count" : 2,
                      "score" : 1563,
                      "build_scorer_count" : 9,
                      "create_weight" : 592219,
                      "shallow_advance" : 2417,
                      "create_weight_count" : 1,
                      "build_scorer" : 98129
                    }
                  },
                  {
                    "type" : "TermQuery",
                    "description" : "id.keyword:2012",
                    "time_in_nanos" : 3769414,
                    "breakdown" : {
                      "set_min_competitive_score_count" : 0,
                      "match_count" : 0,
                      "shallow_advance_count" : 2,
                      "set_min_competitive_score" : 0,
                      "next_doc" : 0,
                      "match" : 0,
                      "next_doc_count" : 0,
                      "score_count" : 1,
                      "compute_max_score_count" : 1,
                      "compute_max_score" : 37116,
                      "advance" : 3779,
                      "advance_count" : 2,
                      "score" : 2002,
                      "build_scorer_count" : 9,
                      "create_weight" : 3673505,
                      "shallow_advance" : 12680,
                      "create_weight_count" : 1,
                      "build_scorer" : 40316
                    }
                  },
                  {
                    "type" : "PointRangeQuery",
                    "description" : "year:[2012 TO 2012]",
                    "time_in_nanos" : 5394854,
                    "breakdown" : {
                      "set_min_competitive_score_count" : 0,
                      "match_count" : 0,
                      "shallow_advance_count" : 6,
                      "set_min_competitive_score" : 0,
                      "next_doc" : 70969,
                      "match" : 0,
                      "next_doc_count" : 22,
                      "score_count" : 216,
                      "compute_max_score_count" : 3,
                      "compute_max_score" : 1673,
                      "advance" : 310722,
                      "advance_count" : 202,
                      "score" : 88762,
                      "build_scorer_count" : 16,
                      "create_weight" : 6514,
                      "shallow_advance" : 2474,
                      "create_weight_count" : 1,
                      "build_scorer" : 4913274
                    }
                  },
                  {
                    "type" : "TermQuery",
                    "description" : "genre:2012",
                    "time_in_nanos" : 1326715,
                    "breakdown" : {
                      "set_min_competitive_score_count" : 0,
                      "match_count" : 0,
                      "shallow_advance_count" : 0,
                      "set_min_competitive_score" : 0,
                      "next_doc" : 0,
                      "match" : 0,
                      "next_doc_count" : 0,
                      "score_count" : 0,
                      "compute_max_score_count" : 0,
                      "compute_max_score" : 0,
                      "advance" : 0,
                      "advance_count" : 0,
                      "score" : 0,
                      "build_scorer_count" : 8,
                      "create_weight" : 1311698,
                      "shallow_advance" : 0,
                      "create_weight_count" : 1,
                      "build_scorer" : 15008
                    }
                  },
                  {
                    "type" : "TermQuery",
                    "description" : "@version:2012",
                    "time_in_nanos" : 219329,
                    "breakdown" : {
                      "set_min_competitive_score_count" : 0,
                      "match_count" : 0,
                      "shallow_advance_count" : 0,
                      "set_min_competitive_score" : 0,
                      "next_doc" : 0,
                      "match" : 0,
                      "next_doc_count" : 0,
                      "score_count" : 0,
                      "compute_max_score_count" : 0,
                      "compute_max_score" : 0,
                      "advance" : 0,
                      "advance_count" : 0,
                      "score" : 0,
                      "build_scorer_count" : 8,
                      "create_weight" : 210478,
                      "shallow_advance" : 0,
                      "create_weight_count" : 1,
                      "build_scorer" : 8842
                    }
                  },
                  {
                    "type" : "TermQuery",
                    "description" : "@version.keyword:2012",
                    "time_in_nanos" : 128792,
                    "breakdown" : {
                      "set_min_competitive_score_count" : 0,
                      "match_count" : 0,
                      "shallow_advance_count" : 0,
                      "set_min_competitive_score" : 0,
                      "next_doc" : 0,
                      "match" : 0,
                      "next_doc_count" : 0,
                      "score_count" : 0,
                      "compute_max_score_count" : 0,
                      "compute_max_score" : 0,
                      "advance" : 0,
                      "advance_count" : 0,
                      "score" : 0,
                      "build_scorer_count" : 8,
                      "create_weight" : 123014,
                      "shallow_advance" : 0,
                      "create_weight_count" : 1,
                      "build_scorer" : 5769
                    }
                  },
                  {
                    "type" : "TermQuery",
                    "description" : "id:2012",
                    "time_in_nanos" : 624891,
                    "breakdown" : {
                      "set_min_competitive_score_count" : 0,
                      "match_count" : 0,
                      "shallow_advance_count" : 2,
                      "set_min_competitive_score" : 0,
                      "next_doc" : 0,
                      "match" : 0,
                      "next_doc_count" : 0,
                      "score_count" : 1,
                      "compute_max_score_count" : 1,
                      "compute_max_score" : 5174,
                      "advance" : 2765,
                      "advance_count" : 2,
                      "score" : 4483,
                      "build_scorer_count" : 9,
                      "create_weight" : 555630,
                      "shallow_advance" : 1528,
                      "create_weight_count" : 1,
                      "build_scorer" : 55295
                    }
                  },
                  {
                    "type" : "TermQuery",
                    "description" : "genre.keyword:2012",
                    "time_in_nanos" : 244376,
                    "breakdown" : {
                      "set_min_competitive_score_count" : 0,
                      "match_count" : 0,
                      "shallow_advance_count" : 0,
                      "set_min_competitive_score" : 0,
                      "next_doc" : 0,
                      "match" : 0,
                      "next_doc_count" : 0,
                      "score_count" : 0,
                      "compute_max_score_count" : 0,
                      "compute_max_score" : 0,
                      "advance" : 0,
                      "advance_count" : 0,
                      "score" : 0,
                      "build_scorer_count" : 8,
                      "create_weight" : 238763,
                      "shallow_advance" : 0,
                      "create_weight_count" : 1,
                      "build_scorer" : 5604
                    }
                  },
                  {
                    "type" : "TermQuery",
                    "description" : "title:2012",
                    "time_in_nanos" : 616946,
                    "breakdown" : {
                      "set_min_competitive_score_count" : 0,
                      "match_count" : 0,
                      "shallow_advance_count" : 4,
                      "set_min_competitive_score" : 0,
                      "next_doc" : 0,
                      "match" : 0,
                      "next_doc_count" : 0,
                      "score_count" : 2,
                      "compute_max_score_count" : 2,
                      "compute_max_score" : 14399,
                      "advance" : 6505,
                      "advance_count" : 4,
                      "score" : 15136,
                      "build_scorer_count" : 10,
                      "create_weight" : 344915,
                      "shallow_advance" : 3839,
                      "create_weight_count" : 1,
                      "build_scorer" : 232129
                    }
                  }
                ]
              }
            ],
            "rewrite_time" : 18695,
            "collector" : [
              {
                "name" : "CancellableCollector",
                "reason" : "search_cancelled",
                "time_in_nanos" : 1140878,
                "children" : [
                  {
                    "name" : "SimpleTopScoreDocCollector",
                    "reason" : "search_top_hits",
                    "time_in_nanos" : 877729
                  }
                ]
              }
            ]
          }
        ],
        "aggregations" : [ ]
      }
    ]
  }
}
````

#### 指定字段

> 不指定df，es会对文档所有字段查询，性能较差，可以修改如下，df代表的是默认字段

```shell
# 带profile
GET /movies/_search?q=2012&df=title
{
  "profile": "true"
}
```

```json
{
  "took" : 38,
  "timed_out" : false,
  "_shards" : {
    "total" : 1,
    "successful" : 1,
    "skipped" : 0,
    "failed" : 0
  },
  "hits" : {
    "total" : {
      "value" : 2,
      "relation" : "eq"
    },
    "max_score" : 11.303033,
    "hits" : [
      {
        "_index" : "movies",
        "_type" : "_doc",
        "_id" : "72378",
        "_score" : 11.303033,
        "_source" : {
          "@version" : "1",
          "genre" : [
            "Action",
            "Drama",
            "Sci-Fi",
            "Thriller"
          ],
          "id" : "72378",
          "title" : "2012",
          "year" : 2009
        }
      },
      {
        "_index" : "movies",
        "_type" : "_doc",
        "_id" : "105254",
        "_score" : 5.2497,
        "_source" : {
          "@version" : "1",
          "genre" : [
            "Adventure",
            "Comedy"
          ],
          "id" : "105254",
          "title" : "Crystal Fairy & the Magical Cactus and 2012",
          "year" : 2013
        }
      }
    ]
  },
  "profile" : {
    "shards" : [
      {
        "id" : "[zDsVsb8STDWIncYJ8JRRZA][movies][0]",
        "searches" : [
          {
            "query" : [
              {
                "type" : "TermQuery",
                "description" : "title:2012",
                "time_in_nanos" : 1233524,
                "breakdown" : {
                  "set_min_competitive_score_count" : 0,
                  "match_count" : 0,
                  "shallow_advance_count" : 0,
                  "set_min_competitive_score" : 0,
                  "next_doc" : 7973,
                  "match" : 0,
                  "next_doc_count" : 4,
                  "score_count" : 2,
                  "compute_max_score_count" : 0,
                  "compute_max_score" : 0,
                  "advance" : 0,
                  "advance_count" : 0,
                  "score" : 26616,
                  "build_scorer_count" : 8,
                  "create_weight" : 446349,
                  "shallow_advance" : 0,
                  "create_weight_count" : 1,
                  "build_scorer" : 752571
                }
              }
            ],
            "rewrite_time" : 5328,
            "collector" : [
              {
                "name" : "CancellableCollector",
                "reason" : "search_cancelled",
                "time_in_nanos" : 664469,
                "children" : [
                  {
                    "name" : "SimpleTopScoreDocCollector",
                    "reason" : "search_top_hits",
                    "time_in_nanos" : 51091
                  }
                ]
              }
            ]
          }
        ],
        "aggregations" : [ ]
      }
    ]
  }
}
```

可以采用另一种方式，结果与以上无异

````shell
# 指定字段
GET /movies/_search?q=title:2012
{
  "profile": "true"
}
````

### Term vs Phrase

+ Beautiful Mind 等效于 Beautiful OR Mind，其实也是泛查询，匹配所有的字段里面包含Beautiful或者Mind

  ````shell
  # 泛查询  or
  GET /movies/_search?q=title:Beautiful Mind
  {
    "profile": "true"
  }
  ````

+ "Beautiful Mind"，等效于Beautiful AND Mind。Phrase查询，还要求前后顺序保持一致

  ````shell
  #使用引号 Phrase查询
  GET /movies/_search?q=title:"Beautiful Mind"
  {
    "profile": "true"
  }
  ````
  
  ```json
  {
    "took" : 19,
    "timed_out" : false,
    "_shards" : {
      "total" : 1,
      "successful" : 1,
      "skipped" : 0,
      "failed" : 0
    },
    "hits" : {
      "total" : {
        "value" : 1,
        "relation" : "eq"
      },
      "max_score" : 13.68748,
      "hits" : [
        {
          "_index" : "movies",
          "_type" : "_doc",
          "_id" : "4995",
          "_score" : 13.68748,
          "_source" : {
            "@version" : "1",
            "genre" : [
              "Drama",
              "Romance"
            ],
            "id" : "4995",
            "title" : "Beautiful Mind, A",
            "year" : 2001
          }
        }
      ]
    },
    "profile" : {
      "shards" : [
        {
          "id" : "[EUr4MAHQRUCzzBdyE2zqBw][movies][0]",
          "searches" : [
            {
              "query" : [
                {
                  "type" : "PhraseQuery",
                  "description" : """title:"beautiful mind"""",
                  "time_in_nanos" : 12270479,
                  "breakdown" : {
                    "set_min_competitive_score_count" : 0,
                    "match_count" : 1,
                    "shallow_advance_count" : 0,
                    "set_min_competitive_score" : 0,
                    "next_doc" : 1931694,
                    "match" : 731961,
                    "next_doc_count" : 3,
                    "score_count" : 1,
                    "compute_max_score_count" : 0,
                    "compute_max_score" : 0,
                    "advance" : 0,
                    "advance_count" : 0,
                    "score" : 45807,
                    "build_scorer_count" : 10,
                    "create_weight" : 4559702,
                    "shallow_advance" : 0,
                    "create_weight_count" : 1,
                    "build_scorer" : 5001299
                  }
                }
              ],
              "rewrite_time" : 6177,
              "collector" : [
                {
                  "name" : "CancellableCollector",
                  "reason" : "search_cancelled",
                  "time_in_nanos" : 99802,
                  "children" : [
                    {
                      "name" : "SimpleTopScoreDocCollector",
                      "reason" : "search_top_hits",
                      "time_in_nanos" : 67629
                    }
                  ]
                }
              ]
            }
          ],
          "aggregations" : [ ]
        }
      ]
    }
  }
  ```
  
  

### 分组与引号

+ title:(Beautiful AND Mind)

  ````shell
  GET /movies/_search?q=title:(Beautiful AND Mind)
  {
    "profile": "true"
  }
  ````

  ````json
  {
    "took" : 8,
    "timed_out" : false,
    "_shards" : {
      "total" : 1,
      "successful" : 1,
      "skipped" : 0,
      "failed" : 0
    },
    "hits" : {
      "total" : {
        "value" : 1,
        "relation" : "eq"
      },
      "max_score" : 13.687479,
      "hits" : [
        {
          "_index" : "movies",
          "_type" : "_doc",
          "_id" : "4995",
          "_score" : 13.687479,
          "_source" : {
            "@version" : "1",
            "genre" : [
              "Drama",
              "Romance"
            ],
            "id" : "4995",
            "title" : "Beautiful Mind, A",
            "year" : 2001
          }
        }
      ]
    },
    "profile" : {
      "shards" : [
        {
          "id" : "[EUr4MAHQRUCzzBdyE2zqBw][movies][0]",
          "searches" : [
            {
              "query" : [
                {
                  "type" : "BooleanQuery",
                  "description" : "+title:beautiful +title:mind",
                  "time_in_nanos" : 1739065,
                  "breakdown" : {
                    "set_min_competitive_score_count" : 0,
                    "match_count" : 0,
                    "shallow_advance_count" : 0,
                    "set_min_competitive_score" : 0,
                    "next_doc" : 112871,
                    "match" : 0,
                    "next_doc_count" : 3,
                    "score_count" : 1,
                    "compute_max_score_count" : 0,
                    "compute_max_score" : 0,
                    "advance" : 0,
                    "advance_count" : 0,
                    "score" : 310,
                    "build_scorer_count" : 10,
                    "create_weight" : 609185,
                    "shallow_advance" : 0,
                    "create_weight_count" : 1,
                    "build_scorer" : 1016684
                  },
                  "children" : [
                    {
                      "type" : "TermQuery",
                      "description" : "title:beautiful",
                      "time_in_nanos" : 896650,
                      "breakdown" : {
                        "set_min_competitive_score_count" : 0,
                        "match_count" : 0,
                        "shallow_advance_count" : 6,
                        "set_min_competitive_score" : 0,
                        "next_doc" : 0,
                        "match" : 0,
                        "next_doc_count" : 0,
                        "score_count" : 1,
                        "compute_max_score_count" : 8,
                        "compute_max_score" : 33095,
                        "advance" : 12096,
                        "advance_count" : 4,
                        "score" : 1879,
                        "build_scorer_count" : 12,
                        "create_weight" : 236864,
                        "shallow_advance" : 8311,
                        "create_weight_count" : 1,
                        "build_scorer" : 604373
                      }
                    },
                    {
                      "type" : "TermQuery",
                      "description" : "title:mind",
                      "time_in_nanos" : 520325,
                      "breakdown" : {
                        "set_min_competitive_score_count" : 0,
                        "match_count" : 0,
                        "shallow_advance_count" : 6,
                        "set_min_competitive_score" : 0,
                        "next_doc" : 0,
                        "match" : 0,
                        "next_doc_count" : 0,
                        "score_count" : 1,
                        "compute_max_score_count" : 6,
                        "compute_max_score" : 44134,
                        "advance" : 47371,
                        "advance_count" : 6,
                        "score" : 13541,
                        "build_scorer_count" : 9,
                        "create_weight" : 326786,
                        "shallow_advance" : 4579,
                        "create_weight_count" : 1,
                        "build_scorer" : 83885
                      }
                    }
                  ]
                }
              ],
              "rewrite_time" : 35487,
              "collector" : [
                {
                  "name" : "CancellableCollector",
                  "reason" : "search_cancelled",
                  "time_in_nanos" : 48701,
                  "children" : [
                    {
                      "name" : "SimpleTopScoreDocCollector",
                      "reason" : "search_top_hits",
                      "time_in_nanos" : 20319
                    }
                  ]
                }
              ]
            }
          ],
          "aggregations" : [ ]
        }
      ]
    }
  }
  ````

+ title="Beautiful Mind"

  Phrase查询，还要求前后顺序保持一致

+ 布尔操作

  + AND / OR / NOT 或者 && / || / !

    + 必须大写
    
  + title:(matrix NOT reloaded
    
    满足title里面同时有Beautiful和Mind
    
    ```shell
    GET /movies/_search?q=title:(Beautiful AND Mind)
    {
      "profile": "true"
    }
    ```
    
    > Title里面必须包含Beautiful不包含mind
    
    `````shell
    GET /movies/_search?q=title:(Beautiful NOT Mind)
    {
      "profile": "true"
    }
    `````

+ 分组

  + +表示must(%2B 等于+号)

    > title里面Beautiful 或者 Mind

    ````shell
    GET /movies/_search?q=title:(Beautiful %2BMind)
    {
      "profile": "true"
    }
    ````

  + -表示must_not

  + Title:(+matrix - reloaded)

+ 范围查询

  + 区间表示：[]闭区间，{}开区间
    + year:{2019 TO 2018}
    + year:[* TO 2018]

+ 算数符号

  + year:>2010
  + year:(>2010 && <=2018)
  + year:(+>2010+<=2018)

  ````shell
  # 年份大于等于1998
  GET /movies/_search?q=year:>=1998
  {
    "profile": "true"
  }
  ````

+ 通配符查询（通配符查询效率低，占用内存大，不建议使用。特别是放在最前面）

  + ?代表1个字符，*代表0或多个字符

    + title:mi?d
    + title:be*  只要title里面有包含b开头的单词就会被检索到

    ````
    GET /movies/_search?q=title:b*
    {
      "profile": "true"
    } 
    ````
    
    

+ 正则表达式

  + title:[bt]oy

+ 模糊匹配与近似查询

  + title:befutifl~1

    ````
  GET /movies/_search?q=title:beautifl~1
    {
    "profile": "true"
    } 
    ````
  
  + title:"lord rings"~2
  
    `````
    # Phrase查询 但是两个单词中间包含2个字符
    GET /movies/_search?q=title:"lord rings"~2
    {
      "profile": "true"
    } 
    `````
    
    
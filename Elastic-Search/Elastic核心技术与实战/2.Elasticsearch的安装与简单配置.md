## 安装Java

![image-20220508142609274](/Users/litian/Documents/lian2077/documents/documents/Elastic-Search/Elastic核心技术与实战/images/image-20220508142609274.png)

## 获取Elasticsearch安装包

> 下载7.1.0版本

+ 下载二进制文件

  https://www.elastic.co/cn/downloads/past-releases/elasticsearch-7-1-0

+ 支持Docker本地运行

+ Helm chart for kubernetes

+ Puppet Module

## Elasticsearch 的文件目录结构

![image-20220508151322164](/Users/litian/Documents/lian2077/documents/documents/Elastic-Search/Elastic核心技术与实战/images/image-20220508151322164.png)

## JVM 配置

> 生产环境总量不要超过30GB

![image-20220508151633056](/Users/litian/Documents/lian2077/documents/documents/Elastic-Search/Elastic核心技术与实战/images/image-20220508151633056.png)

## Elastic运行

在elastic解压缩包目录下执行`bin/elasticsearch`

```shell
elasticsearch-7.1.0 bin/elasticsearch
```

## Elastic插件安装

1. 查看本地安装的插件（目前没有安装任何插件）

   **➜** **elasticsearch-7.1.0** bin/elasticsearch-plugin list

   **➜** **elasticsearch-7.1.0** 

2. 安装插件（analysis-icu是国际化的分词插件）

   **➜** **elasticsearch-7.1.0** bin/elasticsearch-plugin install analysis-icu

3. 这下就能看到插件了

   ````shell
   ➜  elasticsearch-7.1.0 bin/elasticsearch-plugin list                
   analysis-icu
   ➜  elasticsearch-7.1.0 
   ````

4. 重新启动后能看到插件装载

   ![image-20220508153255812](/Users/litian/Documents/lian2077/documents/documents/Elastic-Search/Elastic核心技术与实战/images/image-20220508153255812.png)

5. 访问`http://localhost:9200/_cat/plugins?v`能看到装载的插件

   ![image-20220508153408140](/Users/litian/Documents/lian2077/documents/documents/Elastic-Search/Elastic核心技术与实战/images/image-20220508153408140.png)

6. Elasticsearch 提供插件的机制对系统进行扩展

   + Discovery Plugin
   + Analysis Plugin
   + Security Plugin
   + Management Plugin
   + Ingest Plugin
   + Mapper Plugin
   + Backup Plugin

## 如何在开发机上运行多个Elasticsearch实例

1. 启动集群节点

   **➜** **elasticsearch-7.1.0** bin/elasticsearch -E node.name=node1 -E cluster.name=geekting -E path.data=data/node1_data -d

   **➜** **elasticsearch-7.1.0** bin/elasticsearch -E node.name=node2 -E cluster.name=geekting -E path.data=data/node2_data -d

   **➜** **elasticsearch-7.1.0** bin/elasticsearch -E node.name=node3 -E cluster.name=geekting -E path.data=data/node3_data -d

2. 通过访问`http://localhost:9200/_cat/nodes`可以查看ES里面运行的节点

   ![image-20220508154451783](/Users/litian/Documents/lian2077/documents/documents/Elastic-Search/Elastic核心技术与实战/images/image-20220508154451783.png)

3. 停止ES服务

   **➜** **elasticsearch-7.1.0** ps | grep elasticsearch

   **➜** **elasticsearch-7.1.0** kill pid

## Kibana的安装与界面快速浏览

1. 下载安装包解压到指定目录

   https://www.elastic.co/cn/downloads/past-releases/kibana-7-1-0

2. 在解压目录使用`bin/kibana`启动kibana（elastic需要先启动）

   **➜** **kibana-7.1.0-darwin-x86_64** bin/kibana

3. 访问`localhost:5601`端口查看

   ![image-20220508155720689](/Users/litian/Documents/lian2077/documents/documents/Elastic-Search/Elastic核心技术与实战/images/image-20220508155720689.png)

4. 这儿推荐一个kibana好用的工具 dev tools，可以在这儿对ES进行命令操作

   ![image-20220508155938800](/Users/litian/Documents/lian2077/documents/documents/Elastic-Search/Elastic核心技术与实战/images/image-20220508155938800.png)

   

## Kibana Console

![image-20220508160000235](/Users/litian/Documents/lian2077/documents/documents/Elastic-Search/Elastic核心技术与实战/images/image-20220508160000235.png)

## Kibana Plugins

> 插件只需要给定名字就行，类似Elastic

![image-20220508160035841](/Users/litian/Documents/lian2077/documents/documents/Elastic-Search/Elastic核心技术与实战/images/image-20220508160036555.png)
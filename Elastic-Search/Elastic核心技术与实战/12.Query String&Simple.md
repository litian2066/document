# Query String&Simple

## Query String

> 在DSL里面我们也支持Query String的 方式进行查询

![image-20220510145753708](/Users/litian/Documents/lian2077/documents/documents/Elastic-Search/Elastic核心技术与实战/images/image-20220510145753708.png)

## Simple Query String Query

![image-20220510145903798](/Users/litian/Documents/lian2077/documents/documents/Elastic-Search/Elastic核心技术与实战/images/image-20220510145903798.png)

准备数据

`````shell
PUT /users/_doc/1
{
  "name": "Ruan Yiming",
  "about": "java, golang, node, swift, elasticsearch"
}

PUT /users/_doc/2
{
  "name": "Li Yiming",
  "about": "Hadoop"
}

PUT /users/_doc/3
{
  "name": "Yiming Ruan",
  "about": "Head"
}
`````

查询

````shell
POST users/_search
{
  "query": {
    "query_string": {
      "default_field": "name",
      "query": "Ruan AND Yiming"
    }
  }
}
````

![image-20220510150253263](/Users/litian/Documents/lian2077/documents/documents/Elastic-Search/Elastic核心技术与实战/images/image-20220510150253263.png)

可见查询使用了AND关键字，但是依旧与顺序无关

分组指定多个字段查询

````shell
POST users/_search
{
  "query": {
    "query_string": {
      "fields": ["name", "about"],
      "query": "(Ruan AND Yiming) OR (Java AND Elasticsearch)"
    }
  }
}
````

![image-20220510150438415](/Users/litian/Documents/lian2077/documents/documents/Elastic-Search/Elastic核心技术与实战/images/image-20220510150438415.png)

那么Simple Query String呢？

````shell
# Simple Query String 默认是OR 会把AND当做单词来查询
POST users/_search
{
  "query": {
    "simple_query_string": {
      "query": "Ruan AND Yiming",
      "fields": ["name"]
    }
  }
}
````

![image-20220510150657946](/Users/litian/Documents/lian2077/documents/documents/Elastic-Search/Elastic核心技术与实战/images/image-20220510150657946.png)

如果需要AND的关系需要自己添加条件

````shell
POST users/_search
{
  "query": {
    "simple_query_string": {
      "query": "Ruan AND Yiming",
      "fields": ["name"],
      "default_operator": "AND"
    }
  }
}
````

![image-20220510150757328](/Users/litian/Documents/lian2077/documents/documents/Elastic-Search/Elastic核心技术与实战/images/image-20220510150757328.png)
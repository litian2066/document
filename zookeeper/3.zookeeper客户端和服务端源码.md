ZookeeperMain

初始化Zookeeper

 1.初始化ClientCnxn

 2.初始化SendThread

 3.初始化EventThread

 4.SendThread.start(), SendThread会去建立socket连接

 5.EventThread.start()

SendThread

 1.

ZookeeperMain.run()







初始化socket

Zookeeper：命令 -> Request -> 封装成Packet -> outgoingqueue

ClientCnxnSocketNIO:

SendThread线程是最开始初始化socket就启动的两个线程之一

while () {

 这儿会不停地循环去建立连接

 \1. 如果socket没有连接，就会去连接，如果超时了，甚至还回去重连，集群的地址比较多可以有很多次机会

 \2. 如果socket连接成功，客户端会发送一个ConnnectionRequest，同时接受服务端返回的ConnectionResponse，同时EventThread会构造一个EventType.none（-1）的东西

 \3. 从outgoingqueue取出Packet，通过socket发送出去，同时，如果成功了，就去说pendingqueue里面去放等待结果的Packet

}